<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>聖桜高校 女子バスケ物語</title>
<style>
/* CSSは変更なし */
:root{
  --accent:#87CEFA;
  --bg:#ffffff;
  --text:#111;
  --maxwidth:1080px; 
}
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:"Hiragino Kaku Gothic Pro","Noto Sans JP",Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
  line-height:1.6;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

header{
  width:100%;
  text-align:center;
  background:#fff;
  border-bottom:4px solid var(--accent);
}
/* 💡 画像ファイル名を半角英数字に統一 */
header img{max-width:100%;height:auto;display:block;margin:0 auto}

.wrap{
  max-width:var(--maxwidth);
  margin:0 auto;
  padding:20px 16px;
  display:flex; 
  flex-wrap:wrap;
}

.main{
  flex:0 0 500px; 
  background:#fff;
  border-radius:8px;
  padding:20px;
  box-shadow:0 2px 6px rgba(0,0,0,0.05);
}
.main h1{
  font-size:1.4rem;
  margin-bottom:14px;
  color:var(--accent);
}
.entry{
  border-bottom:1px solid #eee;
  padding:12px 0;
}
.entry h2{
  font-size:1.1rem;
  color:#333;
  margin-bottom:6px;
}
.entry .meta{
  font-size:0.85rem;
  color:#666;
  margin-bottom:8px;
}
.entry .content{font-size:0.95rem;white-space:pre-wrap}

.side{
  flex:1;
  min-width: 300px;
  text-align:center;
  display: flex; 
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  padding: 20px 0;
}
.side img{
  width: 150px; 
  height:auto;
  display:block;
  margin:0 auto 10px auto;
  border-radius: 8px; 
  box-shadow: 0 4px 10px rgba(0,0,0,0.1); 
}

/* カレンダーエリアのデザイン (前回追加分) */
.calendar-box {
    width: 100%;
    max-width: 300px;
    margin-top: 30px;
    padding: 15px;
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.calendar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    font-size: 1.1rem;
    font-weight: bold;
    color: var(--accent);
}

.calendar-header button {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.5rem;
    color: var(--accent);
    padding: 0 5px;
    outline: none;
}

.calendar-table {
    width: 100%;
    border-collapse: collapse;
}

.calendar-table th, .calendar-table td {
    text-align: center;
    padding: 5px 0;
    font-size: 0.85rem;
    border: 1px solid #eee; /* 紙のカレンダー風に薄い線を入れる */
}

.calendar-table th {
    background: #eef;
    color: #555;
}

/* 日記がある日付のデザイン */
.has-diary {
    font-weight: bold;
    color: var(--text) !important;
    background: #fff9e6; /* 💡 日記がある日は薄い黄色 */
    cursor: pointer;
}

/* 選択された日付のデザイン */
.selected-day {
    background: var(--accent) !important;
    color: #fff !important;
    border: 1px solid var(--accent);
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
}

/* 曜日（赤と青） */
.calendar-table td:first-child { color: red; } /* 日曜日 */
.calendar-table td:last-child { color: blue; } /* 土曜日 */

footer{
  margin-top:30px;
  padding:14px;
  background:#f8f8f8;
  border-top:2px solid var(--accent);
  font-size:0.85rem;
  color:#555;
  text-align:center;
}
footer a{color:var(--accent);font-weight:600;text-decoration:none}

@media (max-width:900px){ 
  .wrap { flex-direction: column; align-items: center; }
  .main { order: 2; flex-basis: auto; width: 100%; max-width: 600px; }
  .side { order: 1; flex-basis: auto; width: 100%; }
}
</style>
</head>
<body>
<header>
        <img src="seiodanmaku.png" width="150" height="150" alt="聖桜高校 女子バスケ物語 ロゴ" />
</header>

<div style="text-align:center; margin:10px 0;">
  <div id="welcome-text" style="font-size: 18px; font-weight: bold; color: #111; background-color: #cce7ff; padding: 8px 12px; border-radius: 6px; border: 1px solid #99ccff; display:inline-block;">ようこそ！</div>
</div>

<div class="wrap">
    <main class="main">
            <h1>今日の明日香の日記</h1>
    <div id="news-area">読み込み中です…</div>
        <p style="margin-top: 15px;"><a href="past.html">過去の日記を見る</a></p>
  </main>
  
  <aside class="side">
        <img src="asukasakurai.jpg" alt="桜井明日香" />
    <div style="font-size: 0.9rem; color: #555;">聖桜高校 女子バスケ部エース</div>

    <div id="calendar-area" class="calendar-box">
      <p style="margin-top: 20px; font-weight: bold;">日付をクリックして日記を読み込めます</p>
    </div>
  </aside>
</div>
<script>
// =======================================================
// JSONデータとカレンダー表示のCGIもどきロジック (前回提供したコード)
// =======================================================

let diaryData = []; // 全日記データを格納するグローバル変数
let diaryMap = new Map(); // 日付をキーにしたマップ (高速検索用)
let currentDate = new Date(); // 現在表示しているカレンダーの年月

/**
 * サイト読み込み時処理：JSONデータを取得し、マップに変換
 * 💡 日記ファイル名を半角英数字に統一: 'diary.json'
 */
fetch("diary.json") 
    .then(response => {
        if (!response.ok) {
            throw new Error('JSONファイルを読み込めませんでした。');
        }
        return response.json(); 
    })
    .then(data => {
        diaryData = data;
        // 日記データをMapに変換（'YYYY-MM-DD' => {title, body}）
        diaryData.forEach(entry => {
            diaryMap.set(entry.date, entry);
        });

        // ページロード時、最新の日記を表示
        if (diaryData.length > 0) {
            displayDiaryEntry(diaryData[0].date);
        } else {
            document.getElementById("news-area").innerHTML = `<article class="entry"><h2>日記データがありません。</h2><div class="content">日記ファイル(diary.json)にデータが記述されていません。</div></article>`;
        }


        // カレンダーを初期表示
        renderCalendar(currentDate.getFullYear(), currentDate.getMonth());
    })
    .catch(err => {
        const area = document.getElementById("news-area");
        area.innerHTML = `<p style="color: